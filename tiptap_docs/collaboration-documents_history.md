---
title: History extension | Tiptap Editor Docs
source_url: https://tiptap.dev/docs/collaboration/documents/history#page-title
ogUrl: https://tiptap.dev/docs/collaboration/documents/history
og:image:width: 1200
favicon: https://tiptap.dev/docs/favicon.png
ogDescription: Editor History for manual and automatic versioning of your documents. Learn how to set up and use it here in the Docs!
ogImage: https://tiptap.dev/docs/api/og?title=Integrate%20document%20history&category=Collaboration
og:image:height: 630
ogTitle: History extension | Tiptap Editor Docs
docsearch:version: 2.x
og:url: https://tiptap.dev/docs/collaboration/documents/history
og:description: Editor History for manual and automatic versioning of your documents. Learn how to set up and use it here in the Docs!
twitter:description: Editor History for manual and automatic versioning of your documents. Learn how to set up and use it here in the Docs!
language: en
og:image: https://tiptap.dev/docs/api/og?title=Integrate%20document%20history&category=Collaboration
twitter:title: History extension | Tiptap Editor Docs
twitter:image: https://tiptap.dev/docs/api/og?title=Integrate%20document%20history&category=Collaboration
og:title: History extension | Tiptap Editor Docs
twitter:card: summary_large_image
og:type: website
ogLocale: en_US
description: Editor History for manual and automatic versioning of your documents. Learn how to set up and use it here in the Docs!
robots: index, follow
og:locale: en_US
viewport: width=device-width, initial-scale=1
scrapeId: 21c8d1cf-043c-469a-a0c0-bf5921bbbe3a
sourceURL: https://tiptap.dev/docs/collaboration/documents/history#page-title
url: https://tiptap.dev/docs/collaboration/documents/history#page-title
statusCode: 200
---

![logo](data:,)

[](https://www.cookiebot.com/en/what-is-behind-powered-by-cookiebot/)

*   [Consent](https://tiptap.dev/docs/collaboration/documents/history#)
    
*   [Details](https://tiptap.dev/docs/collaboration/documents/history#)
    
*   [\[#IABV2SETTINGS#\]](https://tiptap.dev/docs/collaboration/documents/history#)
    
*   [About](https://tiptap.dev/docs/collaboration/documents/history#)
    

This website uses cookies

We use cookies to personalise content and ads, to provide social media features and to analyse our traffic. We also share information about your use of our site with our social media, advertising and analytics partners who may combine it with other information that you’ve provided to them or that they’ve collected from your use of their services.

Consent Selection

**Necessary**

**Preferences**

**Statistics**

**Marketing**

[Show details](https://tiptap.dev/docs/collaboration/documents/history#)

Details

*   Necessary 24
    
    Necessary cookies help make a website usable by enabling basic functions like page navigation and access to secure areas of the website. The website cannot function properly without these cookies.
    
    *   [Cookiebot\
        \
        1](https://tiptap.dev/docs/collaboration/documents/history#)
        [Learn more about this provider![](<Base64-Image-Removed>)](https://www.cookiebot.com/goto/privacy-policy/ "Cookiebot's privacy policy")
        
        **1.gif**Used to count the number of sessions to the website, necessary for optimizing CMP product delivery.
        
        **Maximum Storage Duration**: Session**Type**: Pixel Tracker
        
    *   [Google\
        \
        2](https://tiptap.dev/docs/collaboration/documents/history#)
        [Learn more about this provider![](<Base64-Image-Removed>)](https://business.safety.google/privacy/ "Google's privacy policy")
        
        Some of the data collected by this provider is for the purposes of personalization and measuring advertising effectiveness.
        
        **test\_cookie**Stores whether the user's browser has cookie support enabled.
        
        **Maximum Storage Duration**: 1 day**Type**: HTTP Cookie
        
        **ar\_debug**Checks whether a technical debugger-cookie is present.
        
        **Maximum Storage Duration**: 3 months**Type**: HTTP Cookie
        
    *   [ai-demo.tiptap.dev  \
        consent.cookiebot.com  \
        embed.tiptap.dev  \
        embed-pro.tiptap.dev  \
        \
        5](https://tiptap.dev/docs/collaboration/documents/history#)
        
        **CookieConsent \[x5\]**Stores the user's cookie consent state for the current domain
        
        **Maximum Storage Duration**: 1 year**Type**: HTTP Cookie
        
    *   [cdn.webflow.com  \
        hsforms.com  \
        \
        3](https://tiptap.dev/docs/collaboration/documents/history#)
        
        **\_cfuvid \[x3\]**This cookie is a part of the services provided by Cloudflare - Including load-balancing, deliverance of website content and serving DNS connection for website operators.
        
        **Maximum Storage Duration**: Session**Type**: HTTP Cookie
        
    *   [cloud.tiptap.dev\
        \
        1](https://tiptap.dev/docs/collaboration/documents/history#)
        
        **tiptap\_cloud\_session**Assigns a unique session ID to manage and maintain their session state across page requests within the cloud application.
        
        **Maximum Storage Duration**: 1 day**Type**: HTTP Cookie
        
    *   [cloud.tiptap.dev  \
        tiptap.dev  \
        \
        4](https://tiptap.dev/docs/collaboration/documents/history#)
        
        **debug \[x2\]**This cookie is used to detect errors on the website - this information is sent to the website's support staff in order to optimize the visitor's experience on the website.
        
        **Maximum Storage Duration**: Persistent**Type**: HTML Local Storage
        
        **XSRF-TOKEN \[x2\]**Ensures visitor browsing-security by preventing cross-site request forgery. This cookie is essential for the security of the website and visitor.
        
        **Maximum Storage Duration**: 1 day**Type**: HTTP Cookie
        
    *   [embed.tiptap.dev\
        \
        1](https://tiptap.dev/docs/collaboration/documents/history#)
        
        **currentUser**Stores a username and its associated caret color, which are used in the collaboration demo to personalize the user's experience.
        
        **Maximum Storage Duration**: Persistent**Type**: HTML Local Storage
        
    *   [hs-analytics.net  \
        hs-banner.com  \
        \
        6](https://tiptap.dev/docs/collaboration/documents/history#)
        
        **\_\_cf\_bm \[x6\]**This cookie is used to distinguish between humans and bots. This is beneficial for the website, in order to make valid reports on the use of their website.
        
        **Maximum Storage Duration**: 1 day**Type**: HTTP Cookie
        
    *   [x.clearbitjs.com\
        \
        1](https://tiptap.dev/docs/collaboration/documents/history#)
        
        **pfjs%3Acookies**Used to check if the user's browser supports cookies.
        
        **Maximum Storage Duration**: 1 year**Type**: HTTP Cookie
        
    
*   Preferences 1
    
    Preference cookies enable a website to remember information that changes the way the website behaves or looks, like your preferred language or the region that you are in.
    
    *   [tiptap.dev\
        \
        1](https://tiptap.dev/docs/collaboration/documents/history#)
        
        **loglevel**Maintains settings and outputs when using the Developer Tools Console on current session.
        
        **Maximum Storage Duration**: Persistent**Type**: HTML Local Storage
        
    
*   Statistics 5
    
    Statistic cookies help website owners to understand how visitors interact with websites by collecting and reporting information anonymously.
    
    *   [Hubspot\
        \
        4](https://tiptap.dev/docs/collaboration/documents/history#)
        [Learn more about this provider![](<Base64-Image-Removed>)](https://legal.hubspot.com/privacy-policy "Hubspot's privacy policy")
        
        **\_\_hssc**Identifies if the cookie data needs to be updated in the visitor's browser.
        
        **Maximum Storage Duration**: 1 day**Type**: HTTP Cookie
        
        **\_\_hssrc**Used to recognise the visitor's browser upon reentry on the website.
        
        **Maximum Storage Duration**: Session**Type**: HTTP Cookie
        
        **\_\_hstc**Sets a unique ID for the session. This allows the website to obtain data on visitor behaviour for statistical purposes.
        
        **Maximum Storage Duration**: 180 days**Type**: HTTP Cookie
        
        **hubspotutk**Sets a unique ID for the session. This allows the website to obtain data on visitor behaviour for statistical purposes.
        
        **Maximum Storage Duration**: 180 days**Type**: HTTP Cookie
        
    *   [x.clearbitjs.com\
        \
        1](https://tiptap.dev/docs/collaboration/documents/history#)
        
        **cb%3Atest**Collects data on the user's visits to the website, such as the number of visits, average time spent on the website and what pages have been loaded with the purpose of generating reports for optimising the website content.
        
        **Maximum Storage Duration**: 1 year**Type**: HTTP Cookie
        
    
*   Marketing 54
    
    Marketing cookies are used to track visitors across websites. The intention is to display ads that are relevant and engaging for the individual user and thereby more valuable for publishers and third party advertisers.
    
    *   [Google\
        \
        3](https://tiptap.dev/docs/collaboration/documents/history#)
        [Learn more about this provider![](<Base64-Image-Removed>)](https://business.safety.google/privacy/ "Google's privacy policy")
        
        Some of the data collected by this provider is for the purposes of personalization and measuring advertising effectiveness.
        
        **NID**Pending
        
        **Maximum Storage Duration**: 6 months**Type**: HTTP Cookie
        
        **\_ga**Used to send data to Google Analytics about the visitor's device and behavior. Tracks the visitor across devices and marketing channels.
        
        **Maximum Storage Duration**: 2 years**Type**: HTTP Cookie
        
        **\_ga\_#**Used to send data to Google Analytics about the visitor's device and behavior. Tracks the visitor across devices and marketing channels.
        
        **Maximum Storage Duration**: 2 years**Type**: HTTP Cookie
        
    *   [Hubspot\
        \
        1](https://tiptap.dev/docs/collaboration/documents/history#)
        [Learn more about this provider![](<Base64-Image-Removed>)](https://legal.hubspot.com/privacy-policy "Hubspot's privacy policy")
        
        **\_\_ptq.gif**Sends data to the marketing platform Hubspot about the visitor's device and behaviour. Tracks the visitor across devices and marketing channels.
        
        **Maximum Storage Duration**: Session**Type**: Pixel Tracker
        
    *   [Leadfeeder\
        \
        1](https://tiptap.dev/docs/collaboration/documents/history#)
        [Learn more about this provider![](<Base64-Image-Removed>)](https://www.leadfeeder.com/privacy/ "Leadfeeder's privacy policy")
        
        **(unnamed)**Tracks the individual sessions on the website, allowing the website to compile statistical data from multiple visits. This data can also be used to create leads for marketing purposes.
        
        **Maximum Storage Duration**: Session**Type**: Pixel Tracker
        
    *   [Reddit\
        \
        3](https://tiptap.dev/docs/collaboration/documents/history#)
        [Learn more about this provider![](<Base64-Image-Removed>)](https://www.redditinc.com/policies/privacy-policy "Reddit's privacy policy")
        
        **rp.gif**Necessary for the implementation of the Reddit.com's share-button function.
        
        **Maximum Storage Duration**: Session**Type**: Pixel Tracker
        
        **\_rdt\_uuid \[x2\]**Used to track visitors on multiple websites, in order to present relevant advertisement based on the visitor's preferences.
        
        **Maximum Storage Duration**: Session**Type**: HTTP Cookie
        
    *   [YouTube\
        \
        10](https://tiptap.dev/docs/collaboration/documents/history#)
        [Learn more about this provider![](<Base64-Image-Removed>)](https://business.safety.google/privacy/ "YouTube's privacy policy")
        
        **LAST\_RESULT\_ENTRY\_KEY \[x2\]**Used to track user’s interaction with embedded content.
        
        **Maximum Storage Duration**: Session**Type**: HTTP Cookie
        
        **nextId**Used to track user’s interaction with embedded content.
        
        **Maximum Storage Duration**: Session**Type**: HTTP Cookie
        
        **requests**Used to track user’s interaction with embedded content.
        
        **Maximum Storage Duration**: Session**Type**: HTTP Cookie
        
        **TESTCOOKIESENABLED \[x2\]**Used to track user’s interaction with embedded content.
        
        **Maximum Storage Duration**: 1 day**Type**: HTTP Cookie
        
        **\_\_Secure-ROLLOUT\_TOKEN**Pending
        
        **Maximum Storage Duration**: 180 days**Type**: HTTP Cookie
        
        **remote\_sid**Necessary for the implementation and functionality of YouTube video-content on the website.
        
        **Maximum Storage Duration**: Session**Type**: HTTP Cookie
        
        **VISITOR\_INFO1\_LIVE**Pending
        
        **Maximum Storage Duration**: 180 days**Type**: HTTP Cookie
        
        **YSC**Pending
        
        **Maximum Storage Duration**: Session**Type**: HTTP Cookie
        
    *   [embed.tiptap.dev\
        \
        3](https://tiptap.dev/docs/collaboration/documents/history#)
        
        **yt.innertube::nextId**Registers a unique ID to keep statistics of what videos from YouTube the user has seen.
        
        **Maximum Storage Duration**: Persistent**Type**: HTML Local Storage
        
        **LogsDatabaseV2:V#||LogsRequestsStore**Used to track user’s interaction with embedded content.
        
        **Maximum Storage Duration**: Persistent**Type**: IndexedDB
        
        **ServiceWorkerLogsDatabase#SWHealthLog**Necessary for the implementation and functionality of YouTube video-content on the website.
        
        **Maximum Storage Duration**: Persistent**Type**: IndexedDB
        
    *   [sc.lfeeder.com\
        \
        5](https://tiptap.dev/docs/collaboration/documents/history#)
        
        **\_lfa\_test\_cookie\_stored \[x2\]**Used in context with Account-Based-Marketing (ABM). The cookie registers data such as IP-addresses, time spent on the website and page requests for the visit. This is used for retargeting of multiple users rooting from the same IP-addresses. ABM usually facilitates B2B marketing purposes.
        
        **Maximum Storage Duration**: Session**Type**: HTTP Cookie
        
        **\_lfa**Used in context with Account-Based-Marketing (ABM). The cookie registers data such as IP-addresses, time spent on the website and page requests for the visit. This is used for retargeting of multiple users rooting from the same IP-addresses. ABM usually facilitates B2B marketing purposes.
        
        **Maximum Storage Duration**: Persistent**Type**: HTML Local Storage
        
        **\_lfa\_expiry**Contains the expiry-date for the cookie with corresponding name.
        
        **Maximum Storage Duration**: Persistent**Type**: HTML Local Storage
        
        **\_lfa**Used in context with Account-Based-Marketing (ABM). The cookie registers data such as IP-addresses, time spent on the website and page requests for the visit. This is used for retargeting of multiple users rooting from the same IP-addresses. ABM usually facilitates B2B marketing purposes.
        
        **Maximum Storage Duration**: 1 year**Type**: HTTP Cookie
        
    *   [www.youtube-nocookie.com  \
        embed.tiptap.dev  \
        \
        22](https://tiptap.dev/docs/collaboration/documents/history#)
        
        **#-# \[x2\]**Used to track user’s interaction with embedded content.
        
        **Maximum Storage Duration**: Session**Type**: HTML Local Storage
        
        **iU5q-!O9@\[#COOKIETABLE\_ADVERTISING#\]nbsp;\[x2\]**Registers a unique ID to keep statistics of what videos from YouTube the user has seen.
        
        **Maximum Storage Duration**: Session**Type**: HTML Local Storage
        
        **ytidb::LAST\_RESULT\_ENTRY\_KEY \[x2\]**Used to track user’s interaction with embedded content.
        
        **Maximum Storage Duration**: Persistent**Type**: HTML Local Storage
        
        **YtIdbMeta#databases \[x2\]**Used to track user’s interaction with embedded content.
        
        **Maximum Storage Duration**: Persistent**Type**: IndexedDB
        
        **yt-remote-cast-available \[x2\]**Stores the user's video player preferences using embedded YouTube video
        
        **Maximum Storage Duration**: Session**Type**: HTML Local Storage
        
        **yt-remote-cast-installed \[x2\]**Stores the user's video player preferences using embedded YouTube video
        
        **Maximum Storage Duration**: Session**Type**: HTML Local Storage
        
        **yt-remote-connected-devices \[x2\]**Stores the user's video player preferences using embedded YouTube video
        
        **Maximum Storage Duration**: Persistent**Type**: HTML Local Storage
        
        **yt-remote-device-id \[x2\]**Stores the user's video player preferences using embedded YouTube video
        
        **Maximum Storage Duration**: Persistent**Type**: HTML Local Storage
        
        **yt-remote-fast-check-period \[x2\]**Stores the user's video player preferences using embedded YouTube video
        
        **Maximum Storage Duration**: Session**Type**: HTML Local Storage
        
        **yt-remote-session-app \[x2\]**Stores the user's video player preferences using embedded YouTube video
        
        **Maximum Storage Duration**: Session**Type**: HTML Local Storage
        
        **yt-remote-session-name \[x2\]**Stores the user's video player preferences using embedded YouTube video
        
        **Maximum Storage Duration**: Session**Type**: HTML Local Storage
        
    *   [x.clearbitjs.com\
        \
        6](https://tiptap.dev/docs/collaboration/documents/history#)
        
        **\_\_tld\_\_**Used to track visitors on multiple websites, in order to present relevant advertisement based on the visitor's preferences.
        
        **Maximum Storage Duration**: Session**Type**: HTTP Cookie
        
        **cb\_anonymous\_id**Collects data on visitor behaviour from multiple websites, in order to present more relevant advertisement - This also allows the website to limit the number of times that they are shown the same advertisement.
        
        **Maximum Storage Duration**: 1 year**Type**: HTTP Cookie
        
        **cb\_group\_id**Collects data on visitors. This information is used to assign visitors into segments, making website advertisement more efficient.
        
        **Maximum Storage Duration**: 1 year**Type**: HTTP Cookie
        
        **cb\_user\_id**Collects data on visitor behaviour from multiple websites, in order to present more relevant advertisement - This also allows the website to limit the number of times that they are shown the same advertisement.
        
        **Maximum Storage Duration**: 1 year**Type**: HTTP Cookie
        
        **cb\_group\_properties**Collects data on visitor behaviour from multiple websites, in order to present more relevant advertisement - This also allows the website to limit the number of times that they are shown the same advertisement.
        
        **Maximum Storage Duration**: Persistent**Type**: HTML Local Storage
        
        **cb\_user\_traits**Collects data on visitor behaviour from multiple websites, in order to present more relevant advertisement - This also allows the website to limit the number of times that they are shown the same advertisement.
        
        **Maximum Storage Duration**: Persistent**Type**: HTML Local Storage
        
    
*   Unclassified 1
    
    Unclassified cookies are cookies that we are in the process of classifying, together with the providers of individual cookies.
    
    *   [tiptap.dev\
        \
        1](https://tiptap.dev/docs/collaboration/documents/history#)
        
        **tiptap\_pro\_session**Pending
        
        **Maximum Storage Duration**: 1 day**Type**: HTTP Cookie
        
    

[Cross-domain consent2](https://tiptap.dev/docs/collaboration/documents/history#)
 Your consent applies to the following domains:

List of domains your consent applies to:

[cloud.tiptap.dev](https://cloud.tiptap.dev/)

[tiptap.dev](https://tiptap.dev/)

Cookie declaration last updated on 3/13/25 by [Cookiebot](https://www.cookiebot.com/ "Cookiebot")

\[#IABV2\_TITLE#\]

\[#IABV2\_BODY\_INTRO#\]

\[#IABV2\_BODY\_LEGITIMATE\_INTEREST\_INTRO#\]

\[#IABV2\_BODY\_PREFERENCE\_INTRO#\]

\[#IABV2\_LABEL\_PURPOSES#\]

\[#IABV2\_BODY\_PURPOSES\_INTRO#\]

\[#IABV2\_BODY\_PURPOSES#\]

\[#IABV2\_LABEL\_FEATURES#\]

\[#IABV2\_BODY\_FEATURES\_INTRO#\]

\[#IABV2\_BODY\_FEATURES#\]

\[#IABV2\_LABEL\_PARTNERS#\]

\[#IABV2\_BODY\_PARTNERS\_INTRO#\]

\[#IABV2\_BODY\_PARTNERS#\]

About

  

  
  

**Do not sell or share my personal information**

Allow allCustomize

Allow selectionDeny

This extension introduces a document version history feature, allowing you to manually or automatically generate document versions.

You can restore previous iterations, and you can also create new versions from older ones.

### Public Demo

The content of this editor is shared with other users.

[](https://tiptap.dev/docs/collaboration/documents/history#install)
Install
---------------------------------------------------------------------------

### Set up access to Tiptap’s private repository

Gain access to this pro extension by registering for a free [Tiptap account](https://cloud.tiptap.dev/register)
 and following our [access guide](https://tiptap.dev/docs/guides/pro-extensions)
 to Tiptap’s private repository.

    
    npm install @tiptap-pro/extension-collaboration-history @hocuspocus/transformer
    
    

**Note**: The `@hocuspocus/transformer` package is required for transforming Y.js binary into Tiptap JSON. It also requires Y.js installed for collaboration. If you don't have it installed, run `npm install yjs` in your project. This should happen automatically if you use NPM (as it automatically resolves peer dependencies).

[](https://tiptap.dev/docs/collaboration/documents/history#settings)
Settings
-----------------------------------------------------------------------------

| Setting | Type | Default |
| --- | --- | --- |
| provider | `TiptapCollabProvider` | `null` |
| onUpdate | `function` | `() => {}` |

[](https://tiptap.dev/docs/collaboration/documents/history#autoversioning)
Autoversioning
-----------------------------------------------------------------------------------------

The autoversioning feature automatically creates new versions of your document at regular intervals. This ensures that you have a comprehensive change history without manual intervention.

You can toggle this feature using the `toggleVersioning` command (default: disabled).

When you enable autoversioning, Tiptap creates new versions at regular intervals (30 seconds by default, only if the document has changed). This can create many versions, so you may want to increase the interval. To customize the interval, you can do the following:

    // Set the interval (in seconds) between autoversions
    const ydoc = provider.configuration.document
    ydoc.getMap<number>('__tiptapcollab__config').set('intervalSeconds', 900)
    

[](https://tiptap.dev/docs/collaboration/documents/history#revert-to-a-version)
Revert to a version
---------------------------------------------------------------------------------------------------

When you revert to a previous version:

1.  If there are unsaved changes, Tiptap automatically creates a version to preserve those changes.
2.  Tiptap creates a new version at the top of the history with the content from the version you select.
3.  All users can continue working from this new version.

Note that reverting only affects the `default` fragment in the ydoc. When you revert the Tiptap content, the comments don't change (unless you specify a different `field` in the TiptapCollabProvider).

You can integrate the [compare snapshots](https://tiptap.dev/docs/collaboration/documents/snapshot-compare)
 extension to highlight differences between versions, ensuring you choose the right version to restore.

[](https://tiptap.dev/docs/collaboration/documents/history#storage)
Storage
---------------------------------------------------------------------------

| Key | Type | Description |
| --- | --- | --- |
| currentVersion | `number` | The current version. |
| lastSaved | `Date` | The last saved timestamp |
| latestVersion | `number` | The latest version. |
| provider | `TiptapCollabProvider` | The Collaboration provider instance |
| status | `string` | The status of the provider - can be `connecting`, `connected` or `disconnected` |
| synced | `boolean` | Is the version history synced with the server |
| versioningEnabled | `boolean` | Is versioning enabled |
| versions | `array<Version>` | The array of versions that are stored in the history. |

[](https://tiptap.dev/docs/collaboration/documents/history#commands)
Commands
-----------------------------------------------------------------------------

| Command | Description |
| --- | --- |
| saveVersion | Creates a new version with a given title |
| toggleVersioning | Toggles autoversioning for this document |
| revertToVersion | Revert to a specific version, can create a new revert version with optional title |

[](https://tiptap.dev/docs/collaboration/documents/history#examples)
Examples
-----------------------------------------------------------------------------

### [](https://tiptap.dev/docs/collaboration/documents/history#basic-setup)
Basic setup

    const provider = new TiptapCollabProvider({
      // ...
    })
    
    const editor = new Editor({
      // ...
      extensions: [\
        // ...\
        CollabHistory.configure({\
          provider,\
        }),\
      ],
    })
    

### [](https://tiptap.dev/docs/collaboration/documents/history#store-version-updates)
Store version updates

In this example we retrieve the data of a version update and save it into a variable

    let currentVersion = 0
    let latestVersion = 0
    let autoversioningEnabled = false
    let versions = []
    
    const provider = new TiptapCollabProvider({
      // ...
    })
    
    const editor = new Editor({
      // ...
      extensions: [\
        // ...\
        CollabHistory.configure({\
          provider,\
          onUpdate(payload) {\
            currentVersion = payload.currentVersion\
            latestVersion = payload.version\
            versions = payload.versions\
            autoversioningEnabled = payload.autoVersioning\
          },\
        }),\
      ],
    })
    

### [](https://tiptap.dev/docs/collaboration/documents/history#access-version-data-directly-from-storage)
Access version data directly from storage

    const provider = new TiptapCollabProvider({
      // ...
    })
    
    const editor = new Editor({
      // ...
      extensions: [\
        // ...\
        CollabHistory.configure({\
          provider,\
        }),\
      ],
    })
    
    const latestVersion = editor.storage.collabHistory.latestVersion
    const currentVersion = editor.storage.collabHistory.currentVersion
    const versions = editor.storage.collabHistory.versions
    const autoversioningEnabled = editor.storage.collabHistory.versioningEnabled
    

### [](https://tiptap.dev/docs/collaboration/documents/history#create-a-new-version-manually)
Create a new version manually

    editor.commands.saveVersion('My new custom version')
    

### [](https://tiptap.dev/docs/collaboration/documents/history#toggle-autoversioning-on-document)
Toggle autoversioning on document

    editor.commands.toggleVersioning()
    

### [](https://tiptap.dev/docs/collaboration/documents/history#revert-with-version-id)
Revert with version ID

    editor.commands.revertToVersion(4)
    

### [](https://tiptap.dev/docs/collaboration/documents/history#revert-with-version-id-with-custom-name)
Revert with version ID with custom name

In this example, the editor command helps you go back to version 4. When you use this command, it takes you back to how things were in version 4, and it also saves this old version as a new version called 'Revert to version'. This way, you can continue working from version 4, but it's now saved as the latest version.

    editor.commands.revertToVersion(4, 'Revert to version')
    

### [](https://tiptap.dev/docs/collaboration/documents/history#revert-name-and-back-up)
Revert, name, and back up

In this example, when you revert to version 4 of your document, the editor automatically creates two new versions. The first new version captures and saves your document’s state just before reverting, serving as a backup. The second new version restores the document to version 4, allowing you to continue from here as your new starting point.

    editor.commands.revertToVersion(4, 'Revert to version', 'Unversioned changes before revert')
    

### [](https://tiptap.dev/docs/collaboration/documents/history#implementing-version-previews-for-your-editor)
Implementing version previews for your editor

The examples above directly modify the document and do not provide local-only previews of the version. Therefore, you must create your own frontend solution for this requirement. You can leverage the stateless messaging system of the `TiptapCloudProvider` to request a specific version from the server.

Start by attaching a listener to the provider:

    // Import the getPreviewContentFromVersionPayload helper function (refer to details below)
    import { watchPreviewContent } from '@tiptap-pro/extension-collaboration-history'
    
    // Configure the provider
    const provider = new TiptapCollabProvider({ ... })
    
    // Use the watchPreviewContent util function to watch for content changes on the provider
    const unbindWatchContent = watchPreviewContent(provider, content => {
      // set your editors content
      editor.commands.setContent(content)
    })
    

If you want to unbind the watcher, you can call the returned `unbindWatchContent` function like this:

    const unbindWatchContent = watchPreviewContent(provider, (content) => {
      // set your editors content
      editor.commands.setContent(content)
    })
    
    // unwatch
    unbindWatchContent()
    

Following this setup, you can trigger `version.preview` requests like so:

    // Define a function that sends a version.preview request to the provider
    const requestVersion = (version) => {
      provider.sendStateless(
        JSON.stringify({
          action: 'version.preview',
          // Include your version number here
          version,
        }),
      )
    }
    
    // Trigger the request
    requestVersion(1)
    
    // You can then link this function to button clicks or other UI elements to trigger the request.
    

To go beyond previews and compare different versions visually, the [compare snapshots](https://tiptap.dev/docs/collaboration/documents/snapshot-compare)
 extension provides an easy way to see the changes between any two versions within the editor.

[](https://tiptap.dev/docs/collaboration/documents/history#utility-functions)
Utility functions
-----------------------------------------------------------------------------------------------

### [](https://tiptap.dev/docs/collaboration/documents/history#getpreviewcontentfromversionpayload)
getPreviewContentFromVersionPayload

This function turns the payload from the Collaboration provider into Tiptap JSON content.

| Argument | Description |
| --- | --- |
| payload | The Hocuspocus payload for the version preview event |
| field | The field you want to parse. Default: `default` |

    const myContent = getPreviewContentFromVersionPayload(payload, 'default')
    

### [](https://tiptap.dev/docs/collaboration/documents/history#watchpreviewcontent)
watchPreviewContent

This function sets up a watcher on your provider that watches the necessary events to react to version content changes. It also returns a new function that you can use to unwatch those events.

| Argument | Description |
| --- | --- |
| provider | The Collaboration provider |
| callback | The callback function that is called, the argument is the Tiptap JSON content |
| field | The watched field - defaults to `default` |

    const unwatchContent = watchPreviewContent(provider, editor.commands.setContent, 'default')
    
    // unwatch the version preview content
    unwatchContent()
    

[](https://tiptap.dev/docs/collaboration/documents/history#possible-provider-payloads)
Possible provider payloads
-----------------------------------------------------------------------------------------------------------------

Here is a list of payloads that can be sent or received from the provider:

### [](https://tiptap.dev/docs/collaboration/documents/history#outgoing)
Outgoing

#### [](https://tiptap.dev/docs/collaboration/documents/history#documentrevert)
`document.revert`

Request a document revert to a given version with optional title settings.

    provider.sendStateless(
      JSON.stringify({
        action: 'document.revert',
        version: 1,
        currentVersionName: 'Before reverting to version 1',
        newVersionName: 'Revert to version 1',
      }),
    )
    

#### [](https://tiptap.dev/docs/collaboration/documents/history#versioncreate)
`version.create`

Creates a new version with an optional title.

    this.options.provider.sendStateless(
      JSON.stringify({ action: 'version.create', name: 'My custom version' }),
    )
    

### [](https://tiptap.dev/docs/collaboration/documents/history#incoming)
Incoming

#### [](https://tiptap.dev/docs/collaboration/documents/history#saved)
`saved`

This stateless message can be used to retrieve the last saved timestamp.

    provider.on('stateless', (data) => {
      const payload = JSON.parse(data.payload)
    
      if (payload.action === 'saved') {
        const lastSaved = new Date()
      }
    })
    

#### [](https://tiptap.dev/docs/collaboration/documents/history#versioncreated)
`version.created`

This stateless message includes information about newly created versions.

    provider.on('stateless', (data) => {
      const payload = JSON.parse(data.payload)
    
      if (payload.action === 'version.created') {
        const latestVersion = payload.version
        const currentVersion = payload.version
      }
    })
    

#### [](https://tiptap.dev/docs/collaboration/documents/history#documentreverted)
`document.reverted`

This stateless message includes information about a document revert.

    provider.on('stateless', (data) => {
      const payload = JSON.parse(data.payload)
    
      if (payload.action === 'document.reverted') {
        const currentVersion = payload.version
      }
    })
    

On this page

[Introduction](https://tiptap.dev/docs/collaboration/documents/history#page-title)
[Install](https://tiptap.dev/docs/collaboration/documents/history#install)
 [Settings](https://tiptap.dev/docs/collaboration/documents/history#settings)
 [Autoversioning](https://tiptap.dev/docs/collaboration/documents/history#autoversioning)
 [Revert to a version](https://tiptap.dev/docs/collaboration/documents/history#revert-to-a-version)
 [Storage](https://tiptap.dev/docs/collaboration/documents/history#storage)
 [Commands](https://tiptap.dev/docs/collaboration/documents/history#commands)
 [Examples](https://tiptap.dev/docs/collaboration/documents/history#examples)
 [Utility functions](https://tiptap.dev/docs/collaboration/documents/history#utility-functions)
 [Possible provider payloads](https://tiptap.dev/docs/collaboration/documents/history#possible-provider-payloads)

![Cookiebot session tracker icon loaded](https://imgsct.cookiebot.com/1.gif?dgi=73ee9606-0ee4-41ab-85ee-7626f8741637)